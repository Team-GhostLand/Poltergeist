generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model whitelist {
    uuid         String @id //varchar(60)
    name         String //varchar(20)
    whitelisted  Int //tinyint
    
    account      accounts? @relation("whitelisting")
}

model users {
    discordsnowflakeid  String @id //varchar(191)
	altOf String? //varchar(191)
	invitedBy String //varchar(191)
	approvedBy String? //varchar(191)
	reason String? //varchar(512)

    mcaccounts accounts[] @relation("accounts_to_user")
	main users? @relation("alts_to_main", fields:[altOf], references:[discordsnowflakeid])
	alts users[] @relation("alts_to_main")
	inviter users @relation("invites", fields:[invitedBy], references:[discordsnowflakeid])
	invited users[] @relation("invites")
	approver users? @relation("approval", fields:[approvedBy], references:[discordsnowflakeid])
	approved users[] @relation("approval")
}

model accounts {
    owner  String //varchar(191)
    mcuuid String @unique //varchar(60)
	altreason String? //varchar(512)
	playtime String //varchar(512)
    
    mcuser whitelist  @relation("whitelisting", fields:[mcuuid], references: [uuid])
    user   users      @relation("accounts_to_user", fields:[owner], references: [discordsnowflakeid])

	@@id([owner, mcuuid])
}